#!/usr/bin/env python

from arbeitcli import *
import argparse

if __name__ == '__main__':
    parser = argparse.ArgumentParser()

    sub_parsers = parser.add_subparsers()
    sub_parsers.add_parser('today').set_defaults(func=show_today)
    sub_parsers.add_parser('week').set_defaults(func=calc_week)

    month_parser = sub_parsers.add_parser('month')
    month_parser.set_defaults(func=calc_month)
    month_parser.add_argument('month', nargs='?', type=int)
    month_parser.add_argument('year', nargs='?', type=int)

    start_parser = sub_parsers.add_parser('start')
    start_parser.set_defaults(func=set_start)
    start_parser.add_argument('time', nargs='?')
    start_parser.add_argument('-f', '--force',
                              dest='force',
                              default=False,
                              action="store_true",
                              help='Overwrite existing values')

    end_parser = sub_parsers.add_parser('end')
    end_parser.set_defaults(func=set_end)
    end_parser.add_argument('time', nargs='?')
    end_parser.add_argument('-f', '--force',
                            dest='force',
                            default=False,
                            action="store_true",
                            help='Overwrite existing values')

    break_parser = sub_parsers.add_parser('break')
    break_parser.set_defaults(func=add_break)
    break_parser.add_argument('start', nargs=1)
    break_parser.add_argument('end', nargs='?')
    break_parser.add_argument('comment', nargs='?')

    args = parser.parse_args()
    args.func(args)
